<!--
  Generated template for the AddDesignTaskPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title><span>新增重大问题</span></ion-title>
    <ion-buttons end>
      <button ion-button icon-only (click)="onSaveRecord()">
        <ion-icon ios="ios-cloud-done" md="md-cloud-done"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>

</ion-header>

<ion-content>
  <ion-list>
    <ion-item>
      <ion-label><span class="tip">*</span>六防类型</ion-label>
      <ion-select cancelText="取消" okText="确定" [(ngModel)]="record.sixPreventionId">
        <ion-option *ngFor="let val of sixPreventionList" [value]="val.id">{{val.label}}</ion-option>
        <!-- <ion-option value="f">类型一</ion-option>
          <ion-option value="m">类型二</ion-option> -->
      </ion-select>
    </ion-item>
    <ion-item>
      <ion-label><span class="tip">*</span>重大问题分类</ion-label>
      <ion-select cancelText="取消" okText="确定" [(ngModel)]="record.majorProblemsTypeId">
        <ion-option *ngFor="let val of problemTypeList" [value]="val.id">{{val.label}}</ion-option>
        <!-- <ion-option value="f">分类一</ion-option>
          <ion-option value="m">分类二</ion-option> -->
      </ion-select>
    </ion-item>
    <ion-item>
      <ion-label><span class="tip">*</span>施工单位</ion-label>
      <ion-input placeholder="请输入施工单位" [(ngModel)]="record.constructionUnit" (keyup)="onKey($event,36)"></ion-input>
    </ion-item>
    <ion-item>
      <ion-label><span class="tip">*</span>施工单位类别</ion-label>
      <ion-select cancelText="取消" okText="确定" [(ngModel)]="record.constructionUnitType">
        <ion-option *ngFor="let val of constructionUnitTypeList" [value]="val.id">{{val.label}}</ion-option>
        <!-- <ion-option value="f">分类一</ion-option>
            <ion-option value="m">分类二</ion-option> -->
      </ion-select>
    </ion-item>
    <ion-item>
      <ion-label><span class="tip">*</span>建议质量达标率扣罚</ion-label>
      <ion-input type="number" [(ngModel)]="record.successRate"></ion-input>
      <!-- <ion-textarea rows="5" placeholder="请输入" [(ngModel)]="input.description" (keyup)="onKey($event,200)"></ion-textarea> -->
    </ion-item>
    <ion-item>
      <ion-label>挂接模型</ion-label>
      <ion-toggle disabled [(ngModel)]="hasModel"></ion-toggle>
    </ion-item>

    <ion-item>
      <ion-label><span class="tip">*</span>问题描述</ion-label>
      <ion-textarea rows="5" placeholder="请输入问题描述" [(ngModel)]="record.detail" (keyup)="onKey($event,256)"></ion-textarea>
    </ion-item>
    <ion-item>
      <ion-label><span class="tip">*</span>月度节点</ion-label>
      <ion-textarea rows="5" placeholder="请输入月度节点" [(ngModel)]="record.monthlyNode" (keyup)="onKey($event,256)"></ion-textarea>
    </ion-item>
    <ion-item>
      <ion-label><span class="tip">*</span>督促措施</ion-label>
      <ion-textarea rows="5" placeholder="请输入督促措施" [(ngModel)]="record.superviseDetails" (keyup)="onKey($event,256)"></ion-textarea>
    </ion-item>
    <ion-item>
      <ion-label><span class="tip">*</span>进展情况</ion-label>
      <ion-textarea rows="5" placeholder="请输入进展情况" [(ngModel)]="record.progressDetails" (keyup)="onKey($event,128)"></ion-textarea>
    </ion-item>
    <ion-item>
      <ion-label><span class="tip">*</span>计划完成</ion-label>
      <ion-datetime cancelText="取消" doneText="确定" displayFormat="YYYY-MM-DD" [(ngModel)]="record.overTime"></ion-datetime>
    </ion-item>
    <ion-item-group>
      <ion-item-divider color="light"><span class="tip">*</span>
        <!-- <ion-icon item-start ios="ios-people" md="md-people"></ion-icon> -->
        复检人(管监)
        <ion-icon item-end padding-right ios="ios-arrow-forward" md="md-arrow-forward" (click)="onAddUser()"></ion-icon>
      </ion-item-divider>
      <ion-item text-right>
        <ion-label>
          {{getShowName(userItem)}}
        </ion-label>
      </ion-item>
    </ion-item-group>
    <ion-item-group>
      <ion-item-divider color="light">
        <!-- <ion-icon item-start ios="ios-images" md="md-images"></ion-icon> -->
        问题图片
        <ion-icon item-end padding-right ios="ios-image" md="md-image" (click)="onLocalImage()"></ion-icon>
        <ion-icon item-end padding-right ios="ios-camera" md="md-camera" (click)="onCameraImage()"></ion-icon>
      </ion-item-divider>
      <ion-grid>
        <ion-row>
          <ion-col col-3 *ngFor="let view of viewItems;let i=index">
            <img *ngIf="!view.viewId" [src]="view.thumbPath" (click)="onPrvIamge(view.path)">
          </ion-col>
          <ion-col col-3 *ngFor="let image of newIamgeFile;let i=index">
            <img [src]="image.data" imageViewer="OTHER_IMAGE_URL" (click)="onPrvIamge(image.data)">
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-item-group>
  </ion-list>
</ion-content>