<!--
  Generated template for the AddDesignTaskPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title><span>重大问题详细</span></ion-title>
    <ion-buttons end>
      <button ion-button icon-only (click)="checkInfo()">
        复检
      </button>
    </ion-buttons>
  </ion-navbar>

</ion-header>


<ion-content>
  <ion-list>
    <ion-item>
      <ion-label>问题状态</ion-label>
      <ion-label text-right>
       {{ record.stateName }}
      </ion-label>
    </ion-item>
    <ion-item>
      <ion-label>审批状态</ion-label>
      <ion-label text-right>
        正在审批
      </ion-label>
    </ion-item>
  </ion-list>
  <ion-list>
    <ion-list-header>
      问题信息
    </ion-list-header>
    <ion-item>
      <ion-label>六防类型</ion-label>
      <ion-label text-right>
          {{record.sixPreventionName}}
      </ion-label>
    </ion-item>
    <ion-item>
      <ion-label>重大问题分类</ion-label>
      <ion-label text-right>
          {{record.majorProblemsTypeName}}
      </ion-label>
    </ion-item>
    <ion-item>
      <ion-label>建议质量达标率扣罚</ion-label>
      <ion-label text-right>
          {{record.successRate }}
      </ion-label>
      <!-- <ion-textarea rows="5" placeholder="请输入问题描述" [(ngModel)]="input.description" (keyup)="onKey($event,200)"></ion-textarea> -->
    </ion-item>
    <ion-item>
      <ion-label>挂接模型</ion-label>
      <ion-toggle [(ngModel)]="location"></ion-toggle>
    </ion-item>
    <!-- <ion-item>
      <ion-label>检查部位</ion-label>
      <ion-label text-right>
        部位一
      </ion-label>
    </ion-item> -->
    <ion-item>
      <ion-label>发现时间</ion-label>
      <ion-label text-right>
        {{record.creationTime | date:'yyyy-MM-dd'}}
      </ion-label>
    </ion-item>
   
    <ion-item>
      <ion-label>问题描述</ion-label>
      <ion-textarea rows="5" readonly [(ngModel)]="record.detail" ></ion-textarea>
      <!-- <ion-textarea rows="5" placeholder="请输入问题描述" [(ngModel)]="input.description" (keyup)="onKey($event,200)"></ion-textarea> -->
    </ion-item>
    <ion-item>
      <ion-label>月度节点</ion-label>
      <ion-textarea rows="5" readonly [(ngModel)]="record.monthlyNode" ></ion-textarea>
      <!-- <ion-textarea rows="5" placeholder="请输入问题描述" [(ngModel)]="input.description" (keyup)="onKey($event,200)"></ion-textarea> -->
    </ion-item>
    <ion-item>
      <ion-label>督促措施</ion-label>
      <ion-textarea rows="5" readonly [(ngModel)]="record.superviseDetails" ></ion-textarea>
      <!-- <ion-textarea rows="5" placeholder="请输入问题描述" [(ngModel)]="input.description" (keyup)="onKey($event,200)"></ion-textarea> -->
    </ion-item>
    <ion-item>
      <ion-label>进展情况</ion-label>
      <!-- <ion-label text-right>
        这是进展
      </ion-label> -->
      <ion-textarea rows="5" readonly [(ngModel)]="record.progressDetails" ></ion-textarea>
    </ion-item>
    <ion-item>
      <ion-label>计划完成</ion-label>
      <ion-label text-right>
        {{record.overTime | date:'yyyy-MM-dd'}}
      </ion-label>
      <!-- <ion-datetime cancelText="取消" doneText="确定" displayFormat="YYYY-MM-DD" [(ngModel)]="input.expirationTime"></ion-datetime> -->
    </ion-item>
    <ion-item-group>
      <ion-item-divider color="light">
        <ion-icon item-start ios="ios-people" md="md-people"></ion-icon>
        复检人(管监)
        <ion-icon item-end padding-right ios="ios-person-add" md="md-person-add" (click)="onAddUser()"></ion-icon>
      </ion-item-divider>
      <ion-item text-wrap>
        <ion-label>
          {{getShowName(userItem)}}
        </ion-label>
      </ion-item>
    </ion-item-group>
    <ion-item-group>
      <ion-item-divider color="light">
        <ion-icon item-start ios="ios-images" md="md-images"></ion-icon>
        问题图片
        <!-- <ion-icon item-end padding-right ios="ios-image" md="md-image" (click)="onLocalImage()"></ion-icon>
        <ion-icon item-end padding-right ios="ios-camera" md="md-camera" (click)="onCameraImage()"></ion-icon> -->
      </ion-item-divider>
      <ion-grid>
        <ion-row>
          <!-- <ion-col col-3 *ngFor="let view of viewItems;let i=index">
            <img *ngIf="!view.viewId" [src]="view.thumbPath" (click)="onPrvIamge(view.path)">
          </ion-col> -->
          <ion-col col-3 *ngFor="let image of newIamgeFile;let i=index">
            <img [src]="image.url" imageViewer="OTHER_IMAGE_URL" (click)="onPrvIamge(image.url)">
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-item-group>
  </ion-list>
  <diV *ngIf="show">
      <ion-list>
          <ion-list-header>
            整改记录
          </ion-list-header>
          <div *ngFor="let obj of processRecordList;let i=index">
            <ion-item>
              <ion-label>第{{processRecordList.length - i}}次整改信息</ion-label>
              <!-- <ion-textarea rows="5" readonly [(ngModel)]="obj.detail" ></ion-textarea> -->
              <ion-label text-right>
                <a *ngIf="i === 0" (click)="showInput(true,i)">详情</a>
                <a *ngIf="i !== 0" (click)="showInput(false,i)">详情</a>
              </ion-label>
            </ion-item>
          </div>
        </ion-list>
    <!-- <div *ngFor="let obj of processRecordList;let i=index">
        <ion-list>
            <ion-list-header>
                第{{processRecordList.length - i}}次整改信息
            </ion-list-header>
            <ion-item>
              <ion-label>处理情况</ion-label>
              <ion-textarea rows="5" readonly [(ngModel)]="obj.detail" ></ion-textarea>
            </ion-item>
            <ion-item>
              <ion-label>整改时间</ion-label>
              <ion-label text-right>{{obj.creationTime | date:'yyyy-MM-dd'}}</ion-label>
            </ion-item>
            <ion-item-group>
              <ion-item-divider color="light">
                <ion-icon item-start ios="ios-images" md="md-images"></ion-icon>
                整改后照片/视频
               </ion-item-divider>
              <ion-grid>
                <ion-row>
                  <ion-col col-3 *ngFor="let view of imageList;let i=index">
                    <img *ngIf="view.recordId === obj.id" [src]="view.url" (click)="onPrvIamge(view.url)">
                  </ion-col>
                </ion-row>
              </ion-grid>
            </ion-item-group>
            <ion-item>
              <ion-label>工程部复检人</ion-label>
              <ion-label text-right>{{obj.recheckEngineerName}}</ion-label>
            </ion-item>
            <ion-item>
              <ion-label>是否合格</ion-label>
              <ion-label text-right>{{obj.isPass ? '是' : '否'}}</ion-label>
            </ion-item>
            <ion-item>
              <ion-label>复检意见</ion-label>
              <ion-textarea rows="5" readonly [(ngModel)]="obj.engineerDetail"></ion-textarea>
            </ion-item>
            <ion-item>
              <ion-label>管监复检人</ion-label>
              <ion-label text-right>{{obj.recheckSupervisorName}}</ion-label>
            </ion-item>
            <ion-item>
              <ion-label>是否合格</ion-label>
              <ion-label text-right>{{obj.isOk ? '是' : '否'}}</ion-label>
            </ion-item>
            <ion-item>
              <ion-label>复检意见</ion-label>
              <ion-textarea rows="5" [(ngModel)]="obj.supervisorDetail" readonly></ion-textarea>
            </ion-item>
          </ion-list>
      </div> -->
  
  <!-- <div style="text-align:center;"><button ion-button (click)="showInput()" color="danger">填入、编辑复检意见</button></div> -->
</diV>
</ion-content>