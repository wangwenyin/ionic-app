{"version":3,"sources":["MarkupsGui.js"],"names":["MarkupsGui","viewer","options","Autodesk","Viewing","Extension","call","this","domEvents","name","Private","injectCSS","CORE_EXTENSION","namespace","AutodeskNamespace","namespaceCore","namespaceCoreUtils","prototype","Object","create","constructor","proto","av","avp","load","onCoreLoaded","core","getExtension","toolbar","createToolbarUI","bindedOnToolbarCreated","onToolbarCreated","bind","addEventListener","TOOLBAR_CREATED_EVENT","onEditModeEnterBinded","onEditModeEnter","onEditModeLeaveBinded","onEditModeLeave","onEditModeChangeBinded","onEditModeChange","onMarkupSelectedBinded","onMarkupSelected","EVENT_EDITMODE_ENTER","EVENT_EDITMODE_LEAVE","EVENT_EDITMODE_CHANGED","EVENT_MARKUP_SELECTED","onCoreError","logger","warn","loadExtension","then","unload","unhookAllEvents","removeEventListener","destroyToolbarUI","self","getToolbar","markupToolButton","UI","Button","setToolTip","setIcon","onClick","activate","modelTools","getControl","TOOLBAR","MODELTOOLSID","addControl","index","removeControl","log","showToolsUi","hideToolsUi","event","domToolSelect","ignoreChangeEvent","editMode","optionList","i","len","length","option","value","type","selectedIndex","markup","setStylesUi","createToolsUi","canNavigate","isNavigationAllowed","setControlVisibility","exitNavigationMode","domContent","style","display","container","appendChild","domRoot","parentNode","removeChild","createEditModeOption","locLabel","editModeType","join","html","MARKUP_TYPE_ARROW","MARKUP_TYPE_RECTANGLE","MARKUP_TYPE_CIRCLE","MARKUP_TYPE_TEXT","MARKUP_TYPE_CALLOUT","MARKUP_TYPE_CLOUD","MARKUP_TYPE_POLYLINE","MARKUP_TYPE_POLYCLOUD","MARKUP_TYPE_FREEHAND","MARKUP_TYPE_HIGHLIGHT","MARKUP_TYPE_DIMENSION","document","createElement","className","innerHTML","querySelector","domStylesRoot","hookEvent","onToggleCollapse","onEditModeDone","enterNavigationMode","onUndoClick","onRedoClick","onDeleteClick","onCutClick","onCopyClick","onPasteClick","onDuplicateClick","onSelectEditMode","onStyleChange","getEditModeClass","EditModeClass","curr","deactivate","allowNavigation","undo","redo","getSelection","deleteMarkup","cut","copy","paste","target","cancelEditModeChange","changeEditMode","blur","error","select","styleKey","getAttribute","valueType","getStyle","val","Number","setStyle","defaults","getStyleDefaultValues","key","domElem","getUiForStyleKey","current","selectionIndex","default","values","optLine","push","valueEquals","value1","value2","selector","isVisible","visibleValue","elem","eventStr","callbackFn","handler","matchesSelector","str","forEach","matches","msMatchesSelector","mozMatchesSelector","webkitMatchesSelector","getStyleOptions","activeStatus","enterEditMode","hide","theExtensionManager","registerExtension"],"mappings":"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","file":"MarkupsGui.min.js"}